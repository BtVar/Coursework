Данный репозиторий реализует проект мобильного робота с двумя моторами, управляемый платой на базе микроконтроллера STM32F411RE. Функционал позволяет управлять роботом с целью перемещения по заранее заданной траектории, состоящий из прямолинейных отрезков.
#### Для реализации робота понадобятся:
- Плата на базе STM32F411RE
- 2 мотора постоянного тока управляемых ШИМ
- АКБ
- Преобразователь напряжения с *напряжение вашего АКБ* на 5 В
- Драйвер
- 2 энкодера
- Гироскоп акселерометр на базе MPU6050, использующий I2C
- Кнопка (если отсутствует на плате)
#### Подключение компонентов к пинам микроконтроллера:
- Гироскоп акселерометр - PB8 (SCL), PB9 (SDA)
- Энкодер правого мотора - PC12
- Энкодер левого мотора - PC8
- Правый двигатель - PA8 (ШИМ), PB5 и PB7 (управление направлением вращения колеса)
- Левый двигатель - PA9 (ШИМ), PB10 и PB6 (управление направлением вращения колеса)
- Кнопка - PC13 
#### Структура проекта:
- main - основной исполняемый роботом код
- init - инициализирует и настраивает компоненты
- it_handlers - обработка прерываний
- mpu_i2c - работа с гироскопом по I2C
- utils - функции движения робота, а также вспомогательные
#### Основные методы:
- moveStraight(float distance_cm) - Реализует движение вперед. На вход принимает дистанцию, на которую робот переместиться вперед, в сантиметрах
- turnByAngle(float angle_deg) - Реализует поворот. На вход принимает угол поворота в градусах. Если необходимо повернуть вправо, используйте отрицательное число, для поворота налево - положительное
- MPU_Calibrate() - Калибрует гироскоп, советуем использовать после каждого перемещения вперед с последующим поворотом
- Traject() - Описывает траекторию, по которой поедет робот. Для изменения траектории требуется изменить определение функции в файле utils.c . По умолчанию содержит траекторию изображенную на рисунке ниже, где a = 0,5 м; b = 0,6 м; ψ = 60º
- ![[Pasted image 20260121021408.png]]

Перед запуском движения робота по траектории необходимо изменить значения параметров робота  на ваши. Для этого перейдите в файл utils.c и измените значения WHEEL_DIAMETER (диаметр колеса в мм), PULSES_PER_REV (разрешающая способность ваших энкодеров). 
Далее необходимо настроить ПИД регуляторы. Для этого мы советуем внести в Traject сначала только moveStraight на заданное расстояние и подобрать параметры ПИД, при которых робот будет ехать прямо и ровно на указанное расстояние. Проделать тоже самое с поворотом. Значения коэффициентов ПИД регуляторов находятся в utils.c
Теперь вы можете приступить к использованию вашего робота!


Разработчики: Котегов Степан, Нужный Артем, Попов Артем (8Е32)
